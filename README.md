# 3D-LLMs

## Описание папок
Папка 'abc_dataset' содержит данные из ABC датасета (https://archive.nyu.edu/handle/2451/44309);

Папка 'example_material' содержит следующее:
   - папки 'collages_3', 'collages_4', 'collages_6' содержат коллажи картинок, состоящие из 3/4/6 изображений соответственно, созданные в результате применения Isomap
   - папка 'rendered_imgs' содержит многоракурсные изображения детали 
   - папка 'json_standard' содержит эталонные решения в виде JSON-файлов   
   - папка 'prompts' содержит промпты для генерации JSON-файлов, описывающих процессы планирования механической обработки деталей
   - файл 'example_object_path.pkl' содержит массив всех файлов формата .obj

Папка 'results/json_responses' содержит следующее:
   - папка 'pixtral_12b' содержит JSON-файлы, содержащие ответы модели Pixtral 12B для коллажей, состоящих из 3/4/6 изображений детали
   - папка 'qwen2_5_vl_72b' содержит JSON-файлы, содержащие ответы модели Qwen2.5-VL-72B для коллажей, состоящих из 3/4/6 изображений детали
   - папка 'qwen_vl_max' содержит JSON-файлы, содержащие ответы модели Qwen-VL-Max для коллажей, состоящих из 3/4/6 изображений детали
   - файлы в формате pkl содержат ответы модели в виде массива

## Файл find_parts.py

Файл **find_parts.py** содержит функцию, которая отбирает из данных датасета ABC только те модели, которые состоят из одной детали.
   - 5.111 из 10.000 моделей состоят из одной детали; 
   - Список подходящих файлов формата OBJ сохраняется в файл example_object_path.pkl.

## Файлы render_script_type1.py и render_script_type2.py

Файлы render_script_type1.py и render_script_type2.py реализует рендеринг 3D-модели в 28 изображений.
   - Предварительно надо установить blender (https://huggingface.co/datasets/tiange/Cap3D/resolve/main/misc/blender.zip) и разместить в корне проекта
   - За основу взят код из статьи Сap3D. Ссылка на оригинальный код: https://github.com/tiangeluo/DiffuRank
   - Команды для запуска скриптов:
```
# Создание 8 ракурсов
blender -b -P render_script_type1.py -- --object_path_pkl './example_material/example_object_path.pkl' --parent_dir './example_material'

# Создание 20 ракурсов
blender -b -P render_script_type2.py -- --object_path_pkl './example_material/example_object_path.pkl' --parent_dir './example_material'
```

## Файл dim_reduction_solved_3d_model.py

Файл **dim_reduction_solved_3d_model.ipynb** реализует выбор 3/4/6 различных фотографий модели с разных ракурсов и их объединение в единое изображение.
   - Полученные изображения преобразуются в векторы признаков, после чего применяются методы понижения размерности для визуализации и анализа данных. 
   - На основе результатов выбираются изображения для формирования коллажа.

## Файл json_benchmarks.py 

Файл **json_benchmarks.py** реализует создание эталонных решения JSON-файлов.
   - Для создания эталонных решений используется модель GPT-4o mini.

## Файл llm_benchmarks.py

Файл **llm_benchmarks.py** реализует создание JSON-файлов, описывающих процессы планирования механической обработки деталей.
   - Входными данными для модели являются промпт и созданный ранее коллаж из многоракурсных изображений.
   - Для создания JSON-файлов используются модели Pixtral 12B, Qwen2.5-VL-72B и Qwen-VL-Max.

## Файл evaluate_by_criteria.py

Файл **evaluate_by_criteria.py** реализует оценку качества сгенерированных JSON-файлов по заданным критериям.
   - Оценка осуществляется с использованием модели GPT-4o mini.